[experiment]
name = whisper_2m_4x4gpu
repo_root = /data/AfriSpeech-Dataset-Paper
dir = src/experiments/

[data]
train=/data/data/data_index/1m_data_index/train_8jan23_1246693-all_data_augs_procs-2487460-clean.csv
val=/data/data/data_index/1m_data_index/val_8jan23_47453-all_data_augs_procs-43432-clean.csv
test=/data/data/data_index/1m_data_index/test_8jan23_82154-all_data_augs_procs-71290-clean.csv
domain = all
sampler = LengthGroupedSampler

[models]
model_path = /data/saved_models/whisper-small-243828-2m


[audio]
audio_path = /data/data/intron/
max_audio_len_secs=30

[checkpoints]
checkpoints_path = True

[hyperparameters]
attention_dropout=0.1
hidden_dropout=0.1
feat_proj_dropout=0.0
mask_time_prob=0.05
layerdrop=0.0
gradient_checkpointing=True
gradient_accumulation_steps=4
ctc_loss_reduction=mean
freeze_feature_encoder=True
train_batch_size=4
val_batch_size=8
num_epochs=2
save_steps=1905
eval_steps=1905
logging_steps=50
warmup_steps=7620
save_total_limit=3
dataloader_num_workers=5
learning_rate=5e-6
max_audio_len=260000
max_label_len=400
seed=1778
group_by_length=True
load_best_model_at_end=True
ignore_data_skip=False
length_column_name=duration
data_seed=12260
ctc_zero_infinity=True
overwrite_output_dir=True
ddp_find_unused_parameters=False
sampling_rate=16000
do_train=True
do_eval=True
predict_with_generate=True
generation_max_length=225
use_cache=True
report_to=wandb
min_transcript_len=5
max_audio_len_secs=30

[logs]
train_logs = True
figure_path = True
predictions_path = True
